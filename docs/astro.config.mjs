import { defineConfig } from 'astro/config';
import starlight from '@astrojs/starlight';
import starlightThemeBlack from 'starlight-theme-black';
import starlightSiteGraph from 'starlight-site-graph';
import starlightLinksValidator from 'starlight-links-validator';
import starlightLlmsTxt from 'starlight-llms-txt';
// Generated by `wagents docs generate` â€” run it before dev/build
import generatedSidebar, { navLinks } from './src/generated-sidebar.mjs';

export default defineConfig({
  site: 'https://agents.w4w.dev',
  integrations: [
    starlight({
      title: 'wyattowalsh/agents | AI Agent Configs',
      description: 'AI agent skills, tools, and MCP servers for Claude Code, Gemini CLI, Codex, Cursor, and more',
      lastUpdated: true,
      plugins: [
        starlightThemeBlack({
          navLinks,
        }),
        starlightLinksValidator(),
        starlightLlmsTxt(),
        starlightSiteGraph({
          graphConfig: {
            depth: 2,
            renderArrows: true,
            enableZoom: true,
            enablePan: true,
            enableDrag: true,
            enableHover: true,
            enableClick: 'auto',
            actions: ['fullscreen', 'depth', 'reset-zoom'],
          },
          sitemapConfig: { includeExternalLinks: false },
        }),
      ],
      social: [{ icon: 'github', label: 'GitHub', href: 'https://github.com/wyattowalsh/agents' }],
      customCss: [
        '@fontsource/geist-sans/400.css',
        '@fontsource/geist-sans/500.css',
        '@fontsource/geist-sans/600.css',
        '@fontsource/geist-sans/700.css',
        '@fontsource/geist-mono/400.css',
        './src/styles/custom.css',
      ],
      components: {
        Head: './src/components/starlight/Head.astro',
        Hero: './src/components/starlight/Hero.astro',
        PageTitle: './src/components/starlight/PageTitle.astro',
        Footer: './src/components/starlight/Footer.astro',
      },
      sidebar: generatedSidebar,
    }),
  ],
});
